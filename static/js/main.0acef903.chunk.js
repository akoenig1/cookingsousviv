(this.webpackJsonpcookingsousviv=this.webpackJsonpcookingsousviv||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/heart.31316ffc.png"},179:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n(0),a=n.n(c),r=n(8),o=n.n(r),s=n(13),l=n(24);var u=function(){return Object(i.jsx)("header",{children:Object(i.jsxs)("nav",{className:"navbar",children:[Object(i.jsxs)("h1",{children:["Cooking ",Object(i.jsx)("br",{})," Sous ",Object(i.jsx)("div",{id:"script",children:"Viv"})]}),Object(i.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(i.jsx)("li",{children:Object(i.jsx)(s.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/",children:"HOME"})}),Object(i.jsx)("li",{children:Object(i.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/recipes",children:"RECIPES"})}),Object(i.jsx)("li",{children:Object(i.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/favorites",children:"FAVORITES"})}),Object(i.jsx)("li",{children:Object(i.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/about",children:"ABOUT"})}),Object(i.jsx)("li",{children:Object(i.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/contact",children:"CONTACT"})}),Object(i.jsx)("div",{id:"navbar-underline"}),Object(i.jsx)("div",{id:"social-bar",children:Object(i.jsx)("ul",{children:Object(i.jsx)("li",{children:Object(i.jsx)("a",{className:"social-link",href:"https://www.instagram.com/cookingsousviv/",target:"_blank",rel:"noreferrer",children:Object(i.jsx)("i",{className:"fab fa-instagram fa-lg"})})})})})]})]})})},j=n(16),d=n(10),b=n(137),h=Object(c.createContext)({isLoggedIn:!1,userId:null,token:null,isAdmin:!1,login:function(){},logout:function(){}}),p=function(e){var t=e.component,n=Object(b.a)(e,["component"]),a=Object(c.useContext)(h);return Object(i.jsx)(d.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return a.isAdmin?Object(i.jsx)(t,Object(j.a)(Object(j.a)({},n),e)):Object(i.jsx)(d.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))},O=n(134),m=n(135),v=n(48),x=n(138),g=n(136),f=n(41),k=n.n(f),_=(n(171),function(e){Object(x.a)(c,e);var t=Object(g.a)(c);function c(e){var n;return Object(O.a)(this,c),(n=t.call(this,e)).state={all_photos:[],displayed_photos:[],additional_photos:!0,num_photos_displayed:32},n.server_url="https://cookingsousviv-backend.herokuapp.com",n.getPhotos(),n.getPhotos=n.getPhotos.bind(Object(v.a)(n)),n.handleShowMore=n.handleShowMore.bind(Object(v.a)(n)),n}return Object(m.a)(c,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleShowMore)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleShowMore)}},{key:"getPhotos",value:function(){var e=this;k.a.get("".concat(this.server_url,"/instaPhotos")).then((function(t){e.setState({all_photos:t.data.photos,displayed_photos:Object.values(t.data.photos).slice(0,e.state.num_photos_displayed),num_photos_displayed:e.state.num_photos_displayed+c.number_of_new_photos_to_display}),e.checkForAdditionalPhotos()})).catch((function(e){console.log(e)}))}},{key:"checkForAdditionalPhotos",value:function(){this.state.num_photos_displayed<this.state.all_photos.length?this.setState({additional_photos:!0}):this.setState({additional_photos:!1})}},{key:"handleShowMore",value:function(){window.innerHeight+document.documentElement.scrollTop+1>=document.scrollingElement.scrollHeight&&(this.setState({displayed_photos:Object.values(this.state.all_photos).slice(0,this.state.num_photos_displayed),num_photos_displayed:this.state.num_photos_displayed+c.number_of_new_photos_to_display}),this.checkForAdditionalPhotos())}},{key:"render",value:function(){return Object(i.jsx)("div",{id:"instafeed",children:this.state.displayed_photos.map((function(e,t){return Object(i.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3",children:Object(i.jsx)("a",{href:e.permalink,children:Object(i.jsxs)("div",{className:"photo-box",children:[Object(i.jsx)("div",{className:"image-wrap",children:Object(i.jsx)("img",{src:"VIDEO"===e.media_type?e.thumbnail_url:e.media_url,alt:e.caption})}),Object(i.jsx)("div",{className:"likes",children:Object(i.jsx)("img",{src:n(177).default,alt:"heart"})})]})})},e.timestamp)}))})}}]),c}(a.a.Component));_.number_of_new_photos_to_display=32;var y=_;var w=function(){return Object(i.jsx)("div",{id:"homepage",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-xs-12",children:Object(i.jsxs)("div",{className:"instagram-content",children:[Object(i.jsx)("h3",{children:"- recently in the kitchen -"}),Object(i.jsx)("div",{className:"row photos-wrap",children:Object(i.jsx)(y,{})})]})})})})})};var S=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(w,{})})},N=n(63),C=n.n(N);var I=function(e){return console.log(e),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"LOGIN"}),Object(i.jsx)(C.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Log in with Google",onSuccess:e.handleLogin,onFailure:e.handleLogin,cookiePolicy:"single_host_origin"})]})},E=n(345);var T=function(e){return console.log(e),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"LOGOUT"}),Object(i.jsxs)("form",{onSubmit:e.handleLogout,children:[Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",children:" Logout "})]})]})};var L=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"ABOUT ME"}),Object(i.jsx)("p",{children:"Hang in there...coming soon!"})]})};var P=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"CONTACT"}),Object(i.jsx)("p",{children:"Hang in there...coming soon!"})]})};var A=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"FAVORITES"}),Object(i.jsx)("p",{children:"Hang in there...coming soon!"})]})},D=n(21),R=n.n(D),W=n(30),V=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(),r=Object(l.a)(a,2),o=r[0],s=r[1],u=Object(c.useRef)([]),j=Object(c.useCallback)(function(){var e=Object(W.a)(R.a.mark((function e(t,n,c){var a,r,o,l,j=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.length>3&&void 0!==j[3]?j[3]:{},i(!0),r=new AbortController,u.current.push(r),e.prev=4,e.next=7,fetch(t,{method:n,headers:c,body:a,signal:r.signal});case 7:return o=e.sent,e.next=10,o.json();case 10:if(l=e.sent,u.current=u.current.filter((function(e){return e!==r})),o.ok){e.next=14;break}throw new Error(l.message);case 14:return i(!1),e.abrupt("return",l);case 18:throw e.prev=18,e.t0=e.catch(4),s(e.t0.message),i(!1),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t,n,i){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:o,sendRequest:j,clearError:function(){s(null)}}},M=n(344),B=function(){var e=Object(d.g)(),t=V().sendRequest,n=Object(c.useContext)(h);return Object(i.jsxs)("div",{children:[Object(i.jsxs)("form",{onSubmit:function(i){i.preventDefault();var c=JSON.stringify({title:i.target.title.value,intro:i.target.intro.value,ingredients:i.target.ingredients.value,directions:i.target.directions.value,tags:i.target.tags.value});t("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/create"),"POST",{Authorization:"Bearer "+n.token,"Content-Type":"application/json"},c).then(function(){var t=Object(W.a)(R.a.mark((function t(n){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.replace("".concat(n.url));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(i.jsx)(M.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",children:" Create Post "})]}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return e.replace("/recipes")},children:" Cancel "})]})},F=function(e){var t=Object(d.g)(),n=V().sendRequest,a=Object(c.useContext)(h);return Object(i.jsxs)("div",{children:[Object(i.jsxs)("form",{onSubmit:function(i){i.preventDefault();var c=JSON.stringify({title:i.target.title.value,intro:i.target.intro.value,ingredients:i.target.ingredients.value,directions:i.target.directions.value,tags:i.target.tags.value,id:e.location.recipe.id});n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},c).then(function(){var e=Object(W.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.replace("".concat(n.url));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(i.jsx)(M.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.title}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.intro}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.ingredients}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.directions}),Object(i.jsx)("br",{}),Object(i.jsx)(M.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.tags}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",children:" Update "})]}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return t.replace("/recipes")},children:" Cancel "})]})},H=function(e){var t=Object(d.g)(),n=V().sendRequest,a=Object(c.useContext)(h),r=JSON.stringify(e.location.recipe);return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:function(i){i.preventDefault(),n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},r).then(function(){var e=Object(W.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,alert(n);case 2:t.push("/recipes");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(i.jsxs)("h2",{children:["Are you sure you want to delete ",e.location.recipe.title," "]}),Object(i.jsx)("br",{}),Object(i.jsx)(E.a,{variant:"outlined",color:"primary",type:"submit",children:" Yes "}),Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return t.push("/recipes")},children:" No "})]})})};var J=function(e){var t=Object(c.useContext)(h),n=Object(c.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",id:"",instaPhoto:{},fetched:!1}),a=Object(l.a)(n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){e.recipe[0]&&!r.fetched&&o(Object(j.a)(Object(j.a)({},r),{},{title:e.recipe[0].title,intro:e.recipe[0].intro,ingredients:e.recipe[0].ingredients,directions:e.recipe[0].directions,tags:e.recipe[0].tags,id:e.recipe[0].id,instaPhoto:e.recipe[0].instaPhoto,fetched:!0}))}),[r,e]),Object(i.jsxs)("div",{className:"recipe-container",children:[Object(i.jsx)("h3",{children:r.title}),Object(i.jsx)("p",{children:r.intro}),Object(i.jsx)("p",{children:r.ingredients}),Object(i.jsx)("p",{children:r.directions}),Object(i.jsx)("p",{children:r.tags}),t.isAdmin&&Object(i.jsxs)("div",{children:[Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/update"),recipe:r})},children:"Update"}),Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/delete"),recipe:r})},children:"Delete"})]})]})};n(179),n(180);var q=function(e){var t,n=e.history,a=Object(c.useState)([]),r=Object(l.a)(a,2),o=r[0],u=r[1],b=Object(c.useContext)(h),p="https://cookingsousviv-backend.herokuapp.com",O=Object(d.f)(n.location.pathname,{path:"/recipes/:id"});return O&&O.params.id&&(t=O.params.id),Object(c.useEffect)((function(){var e=!0;return function(e){return k.a.get("".concat(e,"/recipes")).then((function(e){return e.data.recipe_list})).catch((function(e){console.log(e)}))}(p).then((function(t){e&&u(t)})),function(){return e=!1}}),[p]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"RECIPES"}),Object(i.jsxs)("ul",{className:"list-group recipe-list",children:["/recipes"===n.location.pathname?o.map((function(e){var t=e.title,n=e.intro,c=e.url;return Object(i.jsxs)("li",{className:"list-group-item",children:[Object(i.jsxs)("div",{className:"recipe-image-container",children:[Object(i.jsx)("div",{className:"recipe-image-dummy"}),Object(i.jsx)("div",{className:"recipe-image"})]}),Object(i.jsxs)("div",{className:"recipe-text-container",children:[Object(i.jsx)(s.b,{to:"".concat(c),className:"align-top recipe-title row",children:t}),Object(i.jsx)("p",{className:"recipe-intro row",children:n})]})]},c)})):"",Object(i.jsx)(d.d,{children:Object(i.jsx)(d.b,{exact:!0,path:"/recipes/:id",render:function(e){return Object(i.jsx)(J,Object(j.a)({recipe:o.filter((function(e){return e.url==="/recipes/".concat(t)}))},e))}})}),b.isAdmin&&"/recipes"===n.location.pathname&&Object(i.jsx)(E.a,{variant:"outlined",onClick:function(){return n.replace("/recipes/create")},children:"Create"})]})]})},U=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"403 ERROR - ACCESS DENIED"}),Object(i.jsx)("p",{children:Object(i.jsx)(s.b,{to:"/",children:"Back to Home"})})]})};var z=function(e){return Object(i.jsxs)(d.d,{children:[Object(i.jsx)(d.b,{exact:!0,path:"/",component:S}),Object(i.jsx)(d.b,{path:"/login",render:function(e){return Object(i.jsx)(I,Object(j.a)(Object(j.a)({},e),{},{handleLogin:e.handleLogin}))}}),Object(i.jsx)(d.b,{path:"/logout",handleLogout:e.handleLogout,render:function(e){return Object(i.jsx)(T,Object(j.a)(Object(j.a)({},e),{},{handleLogout:e.handleLogout}))}}),Object(i.jsx)(d.b,{path:"/about",component:L}),Object(i.jsx)(d.b,{path:"/contact",component:P}),Object(i.jsx)(d.b,{path:"/favorites",component:A}),Object(i.jsx)(p,{path:"/recipes/create",component:B}),Object(i.jsx)(p,{path:"/recipes/:id/update",component:F}),Object(i.jsx)(p,{path:"/recipes/:id/delete",component:H}),Object(i.jsx)(d.b,{path:"/recipes",component:q}),Object(i.jsx)(d.b,{path:"/unauthorized",component:U})]})},G=function(){var e,t=Object(c.useContext)(h);return e=t.isLoggedIn?Object(i.jsx)(E.a,{variant:"outlined",onClick:t.logout,children:"Logout"}):Object(i.jsx)(C.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(e){k()({method:"POST",url:"http://localhost:5000/auth/google",data:{tokenId:e.tokenId}}).then((function(e){t.login(e.data.user._id,e.data.token,e.data.user.admin)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"}),Object(i.jsx)("div",{children:e})};n(313);var Y=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(l.a)(r,2),s=o[0],j=o[1],d=Object(c.useState)(!1),b=Object(l.a)(d,2),p=b[0],O=b[1],m=Object(c.useCallback)((function(e,t,n,i){O(t),a(e),j(n);var c=i||new Date((new Date).getTime()+864e5);localStorage.setItem("userData",JSON.stringify({token:t,userId:e,admin:n,expiration:c.toISOString()}))}),[]),v=Object(c.useCallback)((function(){O(null),a(null),j(null),localStorage.removeItem("userData")}),[]);return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,e.admin,new Date(e.expiration))}),[m]),Object(i.jsx)("div",{children:Object(i.jsxs)(h.Provider,{value:{isLoggedIn:!!p,token:p,userId:n,isAdmin:s,login:m,logout:v},children:[Object(i.jsx)(u,{}),Object(i.jsx)(G,{}),Object(i.jsx)(z,{})]})})};o.a.render(Object(i.jsx)(s.a,{children:Object(i.jsx)(Y,{})}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.0acef903.chunk.js.map