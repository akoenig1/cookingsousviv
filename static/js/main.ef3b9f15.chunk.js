(this.webpackJsonpcookingsousviv=this.webpackJsonpcookingsousviv||[]).push([[0],{179:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),o=n(9),r=n.n(o),s=n(15),l=n(8);var u=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsxs)("h1",{children:["Cooking ",Object(c.jsx)("br",{})," Sous ",Object(c.jsx)("div",{id:"script",children:"Viv"})]}),Object(c.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/",children:"HOME"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/recipes",children:"RECIPES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/favorites",children:"FAVORITES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/about",children:"ABOUT"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/contact",children:"CONTACT"})}),Object(c.jsx)("div",{id:"navbar-underline"}),Object(c.jsx)("div",{id:"social-bar",children:Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"social-link",href:"https://www.instagram.com/cookingsousviv/",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("i",{className:"fab fa-instagram fa-lg"})})})})})]})]})})},d=n(11),j=n(14),h=n(139),b=Object(i.createContext)({isLoggedIn:!1,userId:null,token:null,isAdmin:!1,login:function(){},logout:function(){}}),p=function(e){var t=e.component,n=Object(h.a)(e,["component"]),a=Object(i.useContext)(b);return Object(c.jsx)(d.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return a.isAdmin?Object(c.jsx)(t,Object(j.a)(Object(j.a)({},n),e)):Object(c.jsx)(d.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))},O=n(135),m=n(136),v=n(48),x=n(140),g=n(138),f=n(31),k=n.n(f),C=(n(100),function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var c;return Object(O.a)(this,n),(c=t.call(this,e)).state={all_photos:[],displayed_photos:[],additional_photos:!0,num_photos_displayed:32,is_loading:!0},c.server_url="https://cookingsousviv-backend.herokuapp.com",c.getPhotos(),c.getPhotos=c.getPhotos.bind(Object(v.a)(c)),c.handleShowMore=c.handleShowMore.bind(Object(v.a)(c)),c}return Object(m.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleShowMore)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleShowMore)}},{key:"getPhotos",value:function(){var e=this;k.a.get("".concat(this.server_url,"/instaPhotos")).then((function(t){e.setState({all_photos:t.data.photos,displayed_photos:Object.values(t.data.photos).slice(0,e.state.num_photos_displayed),num_photos_displayed:e.state.num_photos_displayed+n.number_of_new_photos_to_display,is_loading:!1}),e.checkForAdditionalPhotos()})).catch((function(e){console.log(e)}))}},{key:"checkForAdditionalPhotos",value:function(){this.state.num_photos_displayed<this.state.all_photos.length?this.setState({additional_photos:!0}):this.setState({additional_photos:!1})}},{key:"handleShowMore",value:function(){window.innerHeight+document.documentElement.scrollTop+1>=document.scrollingElement.scrollHeight&&(this.setState({displayed_photos:Object.values(this.state.all_photos).slice(0,this.state.num_photos_displayed),num_photos_displayed:this.state.num_photos_displayed+n.number_of_new_photos_to_display}),this.checkForAdditionalPhotos())}},{key:"render",value:function(){return this.state.is_loading?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsx)("div",{id:"instafeed",children:this.state.displayed_photos.map((function(e,t){return Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:Object(c.jsx)("a",{href:e.permalink,children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid",src:"VIDEO"===e.media_type?e.thumbnail_url:e.media_url,alt:e.caption})})})},e.timestamp)}))})}}]),n}(a.a.Component));C.number_of_new_photos_to_display=32;var _=C;var N=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-6 welcome-message center-block",children:Object(c.jsx)("h2",{className:"text-center",children:"Welcome to my website! We're still under development, but the blog will be up and running very soon (along with a few other exciting features)!"})}),Object(c.jsx)("div",{className:"col"})]})})};var w=function(){return Object(c.jsxs)("div",{id:"homepage",children:[Object(c.jsx)(N,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-xs-12",children:Object(c.jsxs)("div",{className:"instagram-content",children:[Object(c.jsx)("h3",{children:"- recently in the kitchen -"}),Object(c.jsx)("div",{className:"row photos-wrap",children:Object(c.jsx)(_,{})})]})})})})]})};var y=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(w,{})})};var S=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col",id:"coming-soon",children:Object(c.jsx)("h2",{className:"text-center",children:"Hang in there...coming soon!"})}),Object(c.jsx)("div",{className:"col"})]})})};var E=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"ABOUT ME"}),Object(c.jsx)(S,{})]})};var I=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"CONTACT"}),Object(c.jsx)(S,{})]})};var T=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"FAVORITES"}),Object(c.jsx)(S,{})]})},A=n(18),L=n.n(A),P=n(26),D=n(63),V=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(),o=Object(l.a)(a,2),r=o[0],s=o[1],u=Object(i.useRef)([]),d=Object(i.useCallback)(function(){var e=Object(P.a)(L.a.mark((function e(t,n,i){var a,o,r,l,d=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},c(!0),o=new AbortController,u.current.push(o),"GET"!==n&&"DELETE"!==n||(a=null),e.prev=5,e.next=8,fetch(t,{method:n,headers:i,body:a,signal:o.signal});case 8:return r=e.sent,e.next=11,r.json();case 11:if(l=e.sent,u.current=u.current.filter((function(e){return e!==o})),r.ok){e.next=15;break}throw new Error(l.message);case 15:return c(!1),e.abrupt("return",l);case 19:throw e.prev=19,e.t0=e.catch(5),s(e.t0.message),c(!1),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t,n,c){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:r,sendRequest:d,clearError:function(){s(null)}}},R=function(e){var t=Object(i.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(i.useState)(!0),s=Object(l.a)(r,2),u=s[0],d=s[1],j=Object(i.useState)(),h=Object(l.a)(j,2),b=h[0],p=h[1],O=e.useFormProgress(),m=Object(l.a)(O,3);m[0],m[1],m[2];return Object(i.useEffect)((function(){k.a.get("".concat("https://cookingsousviv-backend.herokuapp.com","/instaPhotos")).then((function(e){o(e.data.photos),d(!1)})).catch((function(e){console.log(e)}))})),u?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsxs)("div",{id:"instafeed",children:[Object(c.jsx)("h3",{children:"Select the photo you'd like to associate with this recipe:"}),a.map((function(t){return t?Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",useFormProgress:e.useFormProgress,active:t===b,onClick:function(t){var n;(n=t).preventDefault(),p(n.target),n.target.classList.add("active"),e.setState({photo:JSON.parse(n.target.getAttribute("photo"))})},children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid form-img",photo:JSON.stringify(t),src:"VIDEO"===t.media_type?t.thumbnail_url:t.media_url,alt:t.caption})})},t.timestamp):null}))]})},B=n(344),W=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(B.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.title,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.intro,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.ingredients,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.directions,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.tags,onChange:e.handleChange}),Object(c.jsx)("br",{})]})},z=n(345),F=function(){var e=Object(i.useState)(0),t=Object(l.a)(e,2),n=t[0],c=t[1];return[n,function(){c(n+1)},function(){c(n-1)}]},M=function(){var e=Object(d.g)(),t=V().sendRequest,n=F(),a=Object(l.a)(n,3),o=a[0],r=a[1],s=a[2],u=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",photo:null}),h=Object(l.a)(u,2),p=h[0],O=h[1],m=Object(i.useContext)(b),v=function(n){n.preventDefault();var c=JSON.stringify({title:p.title,intro:p.intro,ingredients:p.ingredients,directions:p.directions,tags:p.tags,photo:p.photo});t("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/create"),"POST",{Authorization:"Bearer "+m.token,"Content-Type":"application/json"},c).then(function(){var t=Object(P.a)(L.a.mark((function t(n){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.replace("".concat(n.url));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},x=[Object(c.jsx)(R,{state:p,setState:O,useFormProgress:F}),Object(c.jsx)(W,{state:p,handleChange:function(e){var t=e.target.value;O(Object(j.a)(Object(j.a)({},p),{},Object(D.a)({},e.target.id,t)))}})],g=0===o,f=o===x.length-1;return Object(c.jsxs)("div",{children:[Object(c.jsx)("form",{onSubmit:v,children:x[o]}),Object(c.jsx)("br",{}),Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return e.replace("/recipes")},children:" Cancel "}),!g&&Object(c.jsx)(z.a,{onClick:function(){return s()},children:"Go Back"}),Object(c.jsx)(z.a,{variant:"outlined",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),f?v(e):r()},children:f?"Create Post":"Next"})]})},J=function(e){var t=Object(d.g)(),n=V().sendRequest,a=Object(i.useContext)(b);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var i=JSON.stringify({title:c.target.title.value,intro:c.target.intro.value,ingredients:c.target.ingredients.value,directions:c.target.directions.value,tags:c.target.tags.value,id:e.location.recipe.id});n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},i).then(function(){var e=Object(P.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.replace("".concat(n.url));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsx)(B.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.title}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.intro}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.ingredients}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.directions}),Object(c.jsx)("br",{}),Object(c.jsx)(B.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.tags}),Object(c.jsx)("br",{}),Object(c.jsx)(z.a,{variant:"outlined",color:"primary",type:"submit",children:" Update "})]}),Object(c.jsx)("br",{}),Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return t.replace("/recipes")},children:" Cancel "})]})},q=function(e){var t=Object(d.g)(),n=V().sendRequest,a=Object(i.useContext)(b),o=JSON.stringify(e.location.recipe);return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault(),n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},o).then(function(){var e=Object(P.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,alert(n);case 2:t.push("/recipes");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsxs)("h2",{children:["Are you sure you want to delete ",e.location.recipe.title," "]}),Object(c.jsx)("br",{}),Object(c.jsx)(z.a,{variant:"outlined",color:"primary",type:"submit",children:" Yes "}),Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return t.push("/recipes")},children:" No "})]})})},U=function(e){var t=Object(i.useState)(e),n=Object(l.a)(t,2),c=n[0],a=n[1];return{value:c,setValue:a,onChange:function(e){a(e.target.value)}}};var G=function(e){var t=e.comment,n=e.recipeId,a=e.onChange,o=Object(i.useContext)(b),r=V().sendRequest;return Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{children:t.userAuthor?t.userAuthor.name:t.guestAuthor}),t.comment,t.isCommentMine&&Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),r("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/").concat(n,"/comments/").concat(t._id),"DELETE",{Authorization:"Bearer "+o.token,"Content-Type":"application/json"}).then(function(){var e=Object(P.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),a()},children:"Delete"})})]},t._id)},H=function(e){return Object(c.jsx)("svg",Object(j.a)(Object(j.a)({},e),{},{"aria-label":"Activity Feed",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(c.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))},Y=function(e){return Object(c.jsx)("svg",Object(j.a)(Object(j.a)({},e),{},{"aria-label":"Unlike",fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(c.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))};var K=function(e){var t=e.isLiked,n=e.recipeId,a=e.incLikes,o=e.decLikes,r=Object(i.useContext)(b),s=V().sendRequest,u=Object(i.useState)(t),d=Object(l.a)(u,2),j=d[0],h=d[1],p="https://cookingsousviv-backend.herokuapp.com";function O(){j?(h(!1),o(),s("".concat(p,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+r.token,"Content-Type":"application/json"})):(h(!0),a(),s("".concat(p,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+r.token,"Content-Type":"application/json"}))}return Object(i.useEffect)((function(){h(t)}),[t]),j?Object(c.jsx)(Y,{onClick:O}):j?void 0:Object(c.jsx)(H,{onClick:O})};var Q=function(e){var t=Object(i.useContext)(b),n=V().sendRequest,a="https://cookingsousviv-backend.herokuapp.com",o=U(""),r=U(""),s=e.recipe[0].id,u=Object(i.useState)(!1),d=Object(l.a)(u,2),h=d[0],p=d[1],O=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",id:"",instaPhoto:{},comments:[],likes:[],likesCount:"",fetched:!1}),m=Object(l.a)(O,2),v=m[0],x=m[1],g=Object(i.useState)(v.likesCount),f=Object(l.a)(g,2),k=f[0],C=f[1];function _(){p(!0)}return Object(i.useEffect)((function(){var c=!0;v.fetched&&!h||function(e){var c={"Content-Type":"application/json"};return t.token&&(c.Authorization="Bearer "+t.token),n("".concat(e,"/recipes/").concat(s),"GET",c).then((function(e){return e})).catch((function(e){console.log(e)}))}(a).then((function(t){return t&&c&&x(Object(j.a)(Object(j.a)({},v),{},{title:e.recipe[0].title,intro:e.recipe[0].intro,ingredients:e.recipe[0].ingredients,directions:e.recipe[0].directions,tags:e.recipe[0].tags,id:e.recipe[0].id,instaPhoto:e.recipe[0].instaPhoto,comments:t.data.comments,likes:t.data.likes,likesCount:t.data.likesCount,isLiked:t.data.isLiked,fetched:!0})),function(){return c=!1}}))}),[h,v,a,e.recipe,t.token,s,n]),Object(i.useEffect)((function(){h&&setTimeout((function(){p(!1)}),500)}),[h]),Object(c.jsxs)("div",{className:"recipe-card",children:[Object(c.jsxs)("div",{className:"recipe-card-top row",children:[Object(c.jsxs)("div",{className:"recipe-card-header col-lg-6",children:[Object(c.jsx)("h3",{className:"recipe-card-title",children:v.title}),Object(c.jsx)("p",{className:"recipe-card-intro",children:v.intro})]}),Object(c.jsx)("div",{className:"recipe-card-image-container col-lg-6",children:Object(c.jsx)("img",{src:v.instaPhoto.media_url,alt:"food",className:"recipe-card-image"})})]}),Object(c.jsxs)("div",{className:"recipe-card-middle row",children:[Object(c.jsx)("p",{className:"recipe-card-ingredients col-lg-4",children:v.ingredients}),Object(c.jsx)("p",{className:"recipe-card-directions col-lg-8",children:v.directions})]}),Object(c.jsx)("div",{className:"recipe-card-bottom row",children:Object(c.jsx)("p",{className:"recipe-card-tags",children:v.tags})}),Object(c.jsx)("div",{className:"recipe-actions",children:t.isLoggedIn&&Object(c.jsx)(K,{isLiked:v.isLiked,recipeId:v.id,incLikes:function(){return C(k+1)},decLikes:function(){return C(k-1)}})}),Object(c.jsx)("div",{className:"likes",children:0!==v.likesCount&&Object(c.jsxs)("span",{className:"likes bold",children:[v.likesCount," ",v.likesCount>1?"likes":"like"]})}),Object(c.jsx)("div",{className:"comments-container",children:v.comments.map((function(e,t){return Object(c.jsx)(G,{comment:e,recipeId:v.id,onChange:_},t)}))}),Object(c.jsx)("div",{children:Object(c.jsxs)("form",{children:[!t.isLoggedIn&&Object(c.jsx)("input",{name:"guestAuthor",placeholder:"Enter your name...",value:r.value,onChange:r.onChange}),Object(c.jsx)("textarea",{name:"content",rows:"5",placeholder:"Enter comment...",value:o.value,onChange:o.onChange}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault();var c=t.isLoggedIn,i=t.isLoggedIn?t.userId:r.value,l=JSON.stringify({comment:o.value,registeredUser:c,userInfo:i});n("".concat(a,"/recipes/").concat(s,"/comments"),"POST",{"Content-Type":"application/json"},l).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})),r.setValue(""),o.setValue(""),p(!0)}})]})}),t.isAdmin&&Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/update"),recipe:v})},children:"Update"}),Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/delete"),recipe:v})},children:"Delete"})]})]})};n(179),n(180);var X=function(e){var t,n=e.history,a=Object(i.useState)([]),o=Object(l.a)(a,2),r=o[0],u=o[1],h=Object(i.useContext)(b),p="https://cookingsousviv-backend.herokuapp.com",O=Object(d.f)(n.location.pathname,{path:"/recipes/:id"});return O&&O.params.id&&(t=O.params.id),Object(i.useEffect)((function(){var e=!0;return function(e){return k.a.get("".concat(e,"/recipes")).then((function(e){return e.data.recipe_list})).catch((function(e){console.log(e)}))}(p).then((function(t){e&&u(t)})),function(){return e=!1}}),[p]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"RECIPES"}),Object(c.jsxs)("ul",{className:"list-group recipe-list",children:["/recipes"===n.location.pathname?r.map((function(e){var t=e.title,n=e.intro,i=e.url,a=e.instaPhoto;return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsx)("div",{className:"recipe-image-container",children:Object(c.jsx)("img",{src:a.media_url,alt:"food",className:"recipe-image"})}),Object(c.jsxs)("div",{className:"recipe-text-container",children:[Object(c.jsx)(s.b,{to:"".concat(i),className:"align-top recipe-title row",children:t}),Object(c.jsx)("p",{className:"recipe-intro row",children:n})]})]},i)})):"",Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{exact:!0,path:"/recipes/:id",render:function(e){return Object(c.jsx)(Q,Object(j.a)({recipe:r.filter((function(e){return e.url==="/recipes/".concat(t)}))},e))}})}),h.isAdmin&&"/recipes"===n.location.pathname&&Object(c.jsx)(z.a,{variant:"outlined",onClick:function(){return n.replace("/recipes/create")},children:"Create"})]})]})},Z=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"403 ERROR - ACCESS DENIED"}),Object(c.jsx)("p",{children:Object(c.jsx)(s.b,{to:"/",children:"Back to Home"})})]})};var $=function(){return Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:y}),Object(c.jsx)(d.b,{path:"/about",component:E}),Object(c.jsx)(d.b,{path:"/contact",component:I}),Object(c.jsx)(d.b,{path:"/favorites",component:T}),Object(c.jsx)(p,{path:"/recipes/create",component:M}),Object(c.jsx)(p,{path:"/recipes/:id/update",component:J}),Object(c.jsx)(p,{path:"/recipes/:id/delete",component:q}),Object(c.jsx)(d.b,{path:"/recipes",component:X}),Object(c.jsx)(d.b,{path:"/unauthorized",component:Z})]})},ee=n(137),te=n.n(ee),ne=function(){var e,t=Object(i.useContext)(b);return e=t.isLoggedIn?Object(c.jsx)(z.a,{variant:"outlined",onClick:t.logout,children:"Logout"}):Object(c.jsx)(te.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(e){k()({method:"POST",url:"".concat("https://cookingsousviv-backend.herokuapp.com","/auth/google"),data:{tokenId:e.tokenId}}).then((function(e){t.login(e.data.user._id,e.data.token,e.data.user.admin)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"}),Object(c.jsx)("div",{children:e})};n(313);var ce=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(!1),r=Object(l.a)(o,2),s=r[0],d=r[1],j=Object(i.useState)(!1),h=Object(l.a)(j,2),p=h[0],O=h[1],m=Object(i.useCallback)((function(e,t,n,c){O(t),a(e),d(n);var i=c||new Date((new Date).getTime()+864e5);localStorage.setItem("userData",JSON.stringify({token:t,userId:e,admin:n,expiration:i.toISOString()}))}),[]),v=Object(i.useCallback)((function(){O(null),a(null),d(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,e.admin,new Date(e.expiration))}),[m]),Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(b.Provider,{value:{isLoggedIn:!!p,token:p,userId:n,isAdmin:s,login:m,logout:v},children:[Object(c.jsx)(u,{}),Object(c.jsx)(ne,{}),Object(c.jsx)($,{})]})})};r.a.render(Object(c.jsx)(s.a,{children:Object(c.jsx)(ce,{})}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.ef3b9f15.chunk.js.map