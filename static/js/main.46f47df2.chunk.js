(this.webpackJsonpcookingsousviv=this.webpackJsonpcookingsousviv||[]).push([[0],{179:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),r=n(9),s=n.n(r),o=n(15),l=n(345),u=n(8);var d=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsxs)("h1",{children:["Cooking ",Object(c.jsx)("br",{})," Sous ",Object(c.jsx)("div",{id:"script",children:"Viv"})]}),Object(c.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/",children:"HOME"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/recipes",children:"RECIPES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/favorites",children:"FAVORITES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/about",children:"ABOUT"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/contact",children:"CONTACT"})}),Object(c.jsx)("div",{id:"navbar-underline"}),Object(c.jsx)("div",{id:"social-bar",children:Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"social-link",href:"https://www.instagram.com/cookingsousviv/",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("i",{className:"fab fa-instagram fa-lg"})})})})})]})]})})},j=n(11),h=n(14),b=n(139),p=Object(i.createContext)({isLoggedIn:!1,userId:null,token:null,isAdmin:!1,login:function(){},logout:function(){}}),O=function(e){var t=e.component,n=Object(b.a)(e,["component"]),a=Object(i.useContext)(p);return Object(c.jsx)(j.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return a.isAdmin?Object(c.jsx)(t,Object(h.a)(Object(h.a)({},n),e)):Object(c.jsx)(j.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))},m=n(135),v=n(136),x=n(48),g=n(140),f=n(138),k=n(31),C=n.n(k),_=(n(100),function(e){Object(g.a)(n,e);var t=Object(f.a)(n);function n(e){var c;return Object(m.a)(this,n),(c=t.call(this,e)).state={all_photos:[],displayed_photos:[],additional_photos:!0,num_photos_displayed:32,is_loading:!0},c.server_url="https://cookingsousviv-backend.herokuapp.com",c.getPhotos(),c.getPhotos=c.getPhotos.bind(Object(x.a)(c)),c.handleShowMore=c.handleShowMore.bind(Object(x.a)(c)),c}return Object(v.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleShowMore)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleShowMore)}},{key:"getPhotos",value:function(){var e=this;C.a.get("".concat(this.server_url,"/instaPhotos")).then((function(t){e.setState({all_photos:t.data.photos,displayed_photos:Object.values(t.data.photos).slice(0,e.state.num_photos_displayed),num_photos_displayed:e.state.num_photos_displayed+n.number_of_new_photos_to_display,is_loading:!1}),e.checkForAdditionalPhotos()})).catch((function(e){console.log(e)}))}},{key:"checkForAdditionalPhotos",value:function(){this.state.num_photos_displayed<this.state.all_photos.length?this.setState({additional_photos:!0}):this.setState({additional_photos:!1})}},{key:"handleShowMore",value:function(){window.innerHeight+document.documentElement.scrollTop+1>=document.scrollingElement.scrollHeight&&(this.setState({displayed_photos:Object.values(this.state.all_photos).slice(0,this.state.num_photos_displayed),num_photos_displayed:this.state.num_photos_displayed+n.number_of_new_photos_to_display}),this.checkForAdditionalPhotos())}},{key:"render",value:function(){return this.state.is_loading?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsx)("div",{id:"instafeed",children:this.state.displayed_photos.map((function(e,t){return Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:Object(c.jsx)("a",{href:e.permalink,children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid",src:"VIDEO"===e.media_type?e.thumbnail_url:e.media_url,alt:e.caption})})})},e.timestamp)}))})}}]),n}(a.a.Component));_.number_of_new_photos_to_display=32;var N=_;var w=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-6 welcome-message center-block",children:Object(c.jsx)("h2",{className:"text-center",children:"Welcome to my website! We're still under development, but the blog will be up and running very soon (along with a few other exciting features)!"})}),Object(c.jsx)("div",{className:"col"})]})})};var y=function(){return Object(c.jsxs)("div",{id:"homepage",children:[Object(c.jsx)(w,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-xs-12",children:Object(c.jsxs)("div",{className:"instagram-content",children:[Object(c.jsx)("h3",{children:"- recently in the kitchen -"}),Object(c.jsx)("div",{className:"row photos-wrap",children:Object(c.jsx)(N,{})})]})})})})]})};var S=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(y,{})})};var E=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col",id:"coming-soon",children:Object(c.jsx)("h2",{className:"text-center",children:"Hang in there...coming soon!"})}),Object(c.jsx)("div",{className:"col"})]})})};var I=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"ABOUT ME"}),Object(c.jsx)(E,{})]})};var T=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"CONTACT"}),Object(c.jsx)(E,{})]})};var A=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"FAVORITES"}),Object(c.jsx)(E,{})]})},P=n(18),L=n.n(P),D=n(26),V=n(63),R=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(),r=Object(u.a)(a,2),s=r[0],o=r[1],l=Object(i.useRef)([]),d=Object(i.useCallback)(function(){var e=Object(D.a)(L.a.mark((function e(t,n,i){var a,r,s,u,d=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},c(!0),r=new AbortController,l.current.push(r),"GET"!==n&&"DELETE"!==n||(a=null),e.prev=5,e.next=8,fetch(t,{method:n,headers:i,body:a,signal:r.signal});case 8:return s=e.sent,e.next=11,s.json();case 11:if(u=e.sent,l.current=l.current.filter((function(e){return e!==r})),s.ok){e.next=15;break}throw new Error(u.message);case 15:return c(!1),e.abrupt("return",u);case 19:throw e.prev=19,e.t0=e.catch(5),o(e.t0.message),c(!1),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t,n,c){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:s,sendRequest:d,clearError:function(){o(null)}}},B=function(e){var t=Object(i.useState)([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)(!0),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(i.useState)(),h=Object(u.a)(j,2),b=h[0],p=h[1],O=e.useFormProgress(),m=Object(u.a)(O,3);m[0],m[1],m[2];return Object(i.useEffect)((function(){C.a.get("".concat("https://cookingsousviv-backend.herokuapp.com","/instaPhotos")).then((function(e){r(e.data.photos),d(!1)})).catch((function(e){console.log(e)}))})),l?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsxs)("div",{id:"instafeed",children:[Object(c.jsx)("h3",{children:"Select the photo you'd like to associate with this recipe:"}),a.map((function(t){return t?Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",useFormProgress:e.useFormProgress,active:t===b,onClick:function(t){var n;(n=t).preventDefault(),p(n.target),n.target.classList.add("active"),e.setState({photo:JSON.parse(n.target.getAttribute("photo"))})},children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid form-img",photo:JSON.stringify(t),src:"VIDEO"===t.media_type?t.thumbnail_url:t.media_url,alt:t.caption})})},t.timestamp):null}))]})},W=n(346),z=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(W.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.title,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.intro,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.ingredients,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.directions,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.tags,onChange:e.handleChange}),Object(c.jsx)("br",{})]})},F=n(347),M=function(){var e=Object(i.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1];return[n,function(){c(n+1)},function(){c(n-1)}]},J=function(){var e=Object(j.g)(),t=R().sendRequest,n=M(),a=Object(u.a)(n,3),r=a[0],s=a[1],o=a[2],l=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",photo:null}),d=Object(u.a)(l,2),b=d[0],O=d[1],m=Object(i.useContext)(p),v=function(n){n.preventDefault();var c=JSON.stringify({title:b.title,intro:b.intro,ingredients:b.ingredients,directions:b.directions,tags:b.tags,photo:b.photo});t("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/create"),"POST",{Authorization:"Bearer "+m.token,"Content-Type":"application/json"},c).then(function(){var t=Object(D.a)(L.a.mark((function t(n){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.replace("".concat(n.url));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},x=[Object(c.jsx)(B,{state:b,setState:O,useFormProgress:M}),Object(c.jsx)(z,{state:b,handleChange:function(e){var t=e.target.value;O(Object(h.a)(Object(h.a)({},b),{},Object(V.a)({},e.target.id,t)))}})],g=0===r,f=r===x.length-1;return Object(c.jsxs)("div",{children:[Object(c.jsx)("form",{onSubmit:v,children:x[r]}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return e.replace("/recipes")},children:" Cancel "}),!g&&Object(c.jsx)(F.a,{onClick:function(){return o()},children:"Go Back"}),Object(c.jsx)(F.a,{variant:"outlined",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),f?v(e):s()},children:f?"Create Post":"Next"})]})},q=function(e){var t=Object(j.g)(),n=R().sendRequest,a=Object(i.useContext)(p);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var i=JSON.stringify({title:c.target.title.value,intro:c.target.intro.value,ingredients:c.target.ingredients.value,directions:c.target.directions.value,tags:c.target.tags.value,id:e.location.recipe.id});n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},i).then(function(){var e=Object(D.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.replace("".concat(n.url));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsx)(W.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.title}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.intro}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.ingredients}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.directions}),Object(c.jsx)("br",{}),Object(c.jsx)(W.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.tags}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{variant:"outlined",color:"primary",type:"submit",children:" Update "})]}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return t.replace("/recipes")},children:" Cancel "})]})},U=function(e){var t=Object(j.g)(),n=R().sendRequest,a=Object(i.useContext)(p),r=JSON.stringify(e.location.recipe);return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault(),n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},r).then(function(){var e=Object(D.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,alert(n);case 2:t.push("/recipes");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsxs)("h2",{children:["Are you sure you want to delete ",e.location.recipe.title," "]}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{variant:"outlined",color:"primary",type:"submit",children:" Yes "}),Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return t.push("/recipes")},children:" No "})]})})},G=function(e){var t=Object(i.useState)(e),n=Object(u.a)(t,2),c=n[0],a=n[1];return{value:c,setValue:a,onChange:function(e){a(e.target.value)}}};var H=function(e){var t=e.comment,n=e.recipeId,a=e.onChange,r=Object(i.useContext)(p),s=R().sendRequest;return Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{children:t.userAuthor?t.userAuthor.name:t.guestAuthor}),t.comment,t.isCommentMine&&Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),s("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/").concat(n,"/comments/").concat(t._id),"DELETE",{Authorization:"Bearer "+r.token,"Content-Type":"application/json"}).then(function(){var e=Object(D.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),a()},children:"Delete"})})]},t._id)},Y=function(e){return Object(c.jsx)("svg",Object(h.a)(Object(h.a)({},e),{},{"aria-label":"Activity Feed",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(c.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))},K=function(e){return Object(c.jsx)("svg",Object(h.a)(Object(h.a)({},e),{},{"aria-label":"Unlike",fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(c.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))};var Q=function(e){var t=e.isLiked,n=e.recipeId,a=e.incLikes,r=e.decLikes,s=Object(i.useContext)(p),o=R().sendRequest,l=Object(i.useState)(t),d=Object(u.a)(l,2),j=d[0],h=d[1],b="https://cookingsousviv-backend.herokuapp.com";function O(){j?(h(!1),r(),o("".concat(b,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+s.token,"Content-Type":"application/json"})):(h(!0),a(),o("".concat(b,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+s.token,"Content-Type":"application/json"}))}return Object(i.useEffect)((function(){h(t)}),[t]),j?Object(c.jsx)(K,{onClick:O}):j?void 0:Object(c.jsx)(Y,{onClick:O})};var X=function(e){var t=Object(i.useContext)(p),n=R().sendRequest,a="https://cookingsousviv-backend.herokuapp.com",r=G(""),s=G(""),o=e.recipe[0].id,l=Object(i.useState)(!1),d=Object(u.a)(l,2),j=d[0],b=d[1],O=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",id:"",instaPhoto:{},comments:[],likes:[],likesCount:"",fetched:!1}),m=Object(u.a)(O,2),v=m[0],x=m[1],g=Object(i.useState)(v.likesCount),f=Object(u.a)(g,2),k=f[0],C=f[1];function _(){b(!0)}return Object(i.useEffect)((function(){var c=!0;v.fetched&&!j||function(e){var c={"Content-Type":"application/json"};return t.token&&(c.Authorization="Bearer "+t.token),n("".concat(e,"/recipes/").concat(o),"GET",c).then((function(e){return e})).catch((function(e){console.log(e)}))}(a).then((function(t){return t&&c&&x(Object(h.a)(Object(h.a)({},v),{},{title:e.recipe[0].title,intro:e.recipe[0].intro,ingredients:e.recipe[0].ingredients,directions:e.recipe[0].directions,tags:e.recipe[0].tags,id:e.recipe[0].id,instaPhoto:e.recipe[0].instaPhoto,comments:t.data.comments,likes:t.data.likes,likesCount:t.data.likesCount,isLiked:t.data.isLiked,fetched:!0})),function(){return c=!1}}))}),[j,v,a,e.recipe,t.token,o,n]),Object(i.useEffect)((function(){j&&setTimeout((function(){b(!1)}),500)}),[j]),Object(c.jsxs)("div",{className:"recipe-page",children:[Object(c.jsxs)("div",{className:"recipe-card",children:[Object(c.jsx)("div",{className:"recipe-card-header row",children:Object(c.jsx)("h3",{className:"recipe-card-title",children:v.title})}),Object(c.jsx)("hr",{className:"recipe-card-divider"}),Object(c.jsxs)("div",{className:"recipe-card-top row",children:[Object(c.jsx)("div",{className:"recipe-card-sub-header col-lg-4",children:Object(c.jsx)("p",{className:"recipe-card-intro",children:v.intro})}),Object(c.jsx)("div",{className:"recipe-card-image-container col-lg-8",children:Object(c.jsx)("img",{src:v.instaPhoto.media_url,alt:"food",className:"recipe-card-image"})})]}),Object(c.jsx)("hr",{className:"recipe-card-divider"}),Object(c.jsxs)("div",{className:"recipe-card-middle row",children:[Object(c.jsxs)("div",{className:"recipe-card-ingredients col-lg-4",children:[Object(c.jsx)("h4",{children:"Ingredients"}),Object(c.jsx)("p",{children:v.ingredients})]}),Object(c.jsxs)("div",{className:"recipe-card-directions col-lg-8",children:[Object(c.jsx)("h4",{children:"Preparation"}),Object(c.jsx)("p",{children:v.directions})]})]}),Object(c.jsx)("div",{className:"recipe-card-bottom row",children:Object(c.jsx)("p",{id:"recipe-card-tags",children:v.tags})})]}),Object(c.jsx)("div",{className:"recipe-actions",children:t.isLoggedIn&&Object(c.jsx)(Q,{isLiked:v.isLiked,recipeId:v.id,incLikes:function(){return C(k+1)},decLikes:function(){return C(k-1)}})}),Object(c.jsx)("div",{className:"likes",children:0!==v.likesCount&&Object(c.jsxs)("span",{className:"likes bold",children:[v.likesCount," ",v.likesCount>1?"likes":"like"]})}),Object(c.jsx)("div",{className:"comments-container",children:v.comments.map((function(e,t){return Object(c.jsx)(H,{comment:e,recipeId:v.id,onChange:_},t)}))}),Object(c.jsx)("div",{children:Object(c.jsxs)("form",{children:[!t.isLoggedIn&&Object(c.jsx)("input",{name:"guestAuthor",placeholder:"Enter your name...",value:s.value,onChange:s.onChange}),Object(c.jsx)("textarea",{name:"content",rows:"5",placeholder:"Enter comment...",value:r.value,onChange:r.onChange}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault();var c=t.isLoggedIn,i=t.isLoggedIn?t.userId:s.value,l=JSON.stringify({comment:r.value,registeredUser:c,userInfo:i});n("".concat(a,"/recipes/").concat(o,"/comments"),"POST",{"Content-Type":"application/json"},l).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})),s.setValue(""),r.setValue(""),b(!0)}})]})}),t.isAdmin&&Object(c.jsxs)("div",{children:[Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/update"),recipe:v})},children:"Update"}),Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/delete"),recipe:v})},children:"Delete"})]})]})};n(179),n(180);var Z=function(e){var t,n=e.history,a=Object(i.useState)([]),r=Object(u.a)(a,2),s=r[0],l=r[1],d=Object(i.useContext)(p),b="https://cookingsousviv-backend.herokuapp.com",O=Object(j.f)(n.location.pathname,{path:"/recipes/:id"});return O&&O.params.id&&(t=O.params.id),Object(i.useEffect)((function(){var e=!0;return function(e){return C.a.get("".concat(e,"/recipes")).then((function(e){return e.data.recipe_list})).catch((function(e){console.log(e)}))}(b).then((function(t){e&&l(t)})),function(){return e=!1}}),[b]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"RECIPES"}),Object(c.jsxs)("ul",{className:"list-group recipe-list",children:["/recipes"===n.location.pathname?s.map((function(e){var t=e.title,n=e.intro,i=e.url,a=e.instaPhoto;return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsx)("div",{className:"recipe-image-container",children:Object(c.jsx)("img",{src:a.media_url,alt:"food",className:"recipe-image"})}),Object(c.jsxs)("div",{className:"recipe-text-container",children:[Object(c.jsx)(o.b,{to:"".concat(i),className:"align-top recipe-title row",children:t}),Object(c.jsx)("p",{className:"recipe-intro row",children:n})]})]},i)})):"",Object(c.jsx)(j.d,{children:Object(c.jsx)(j.b,{exact:!0,path:"/recipes/:id",render:function(e){return Object(c.jsx)(X,Object(h.a)({recipe:s.filter((function(e){return e.url==="/recipes/".concat(t)}))},e))}})}),d.isAdmin&&"/recipes"===n.location.pathname&&Object(c.jsx)(F.a,{variant:"outlined",onClick:function(){return n.replace("/recipes/create")},children:"Create"})]})]})},$=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"403 ERROR - ACCESS DENIED"}),Object(c.jsx)("p",{children:Object(c.jsx)(o.b,{to:"/",children:"Back to Home"})})]})};var ee=function(){return Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/",component:S}),Object(c.jsx)(j.b,{path:"/about",component:I}),Object(c.jsx)(j.b,{path:"/contact",component:T}),Object(c.jsx)(j.b,{path:"/favorites",component:A}),Object(c.jsx)(O,{path:"/recipes/create",component:J}),Object(c.jsx)(O,{path:"/recipes/:id/update",component:q}),Object(c.jsx)(O,{path:"/recipes/:id/delete",component:U}),Object(c.jsx)(j.b,{path:"/recipes",component:Z}),Object(c.jsx)(j.b,{path:"/unauthorized",component:$})]})},te=n(137),ne=n.n(te),ce=function(){var e,t=Object(i.useContext)(p);return e=t.isLoggedIn?Object(c.jsx)(F.a,{variant:"outlined",onClick:t.logout,children:"Logout"}):Object(c.jsx)(ne.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(e){C()({method:"POST",url:"".concat("https://cookingsousviv-backend.herokuapp.com","/auth/google"),data:{tokenId:e.tokenId}}).then((function(e){t.login(e.data.user._id,e.data.token,e.data.user.admin)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"}),Object(c.jsx)("div",{children:e})};n(313);var ie=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(i.useState)(!1),h=Object(u.a)(j,2),b=h[0],O=h[1],m=Object(i.useCallback)((function(e,t,n,c){O(t),a(e),l(n);var i=c||new Date((new Date).getTime()+864e5);localStorage.setItem("userData",JSON.stringify({token:t,userId:e,admin:n,expiration:i.toISOString()}))}),[]),v=Object(i.useCallback)((function(){O(null),a(null),l(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,e.admin,new Date(e.expiration))}),[m]),Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(p.Provider,{value:{isLoggedIn:!!b,token:b,userId:n,isAdmin:o,login:m,logout:v},children:[Object(c.jsx)(d,{}),Object(c.jsx)(ce,{}),Object(c.jsx)(ee,{})]})})};s.a.render(Object(c.jsxs)(o.a,{children:[Object(c.jsx)(l.a,{}),Object(c.jsx)(ie,{})]}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.46f47df2.chunk.js.map