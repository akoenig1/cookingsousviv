(this.webpackJsonpcookingsousviv=this.webpackJsonpcookingsousviv||[]).push([[0],{180:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),s=n(9),r=n.n(s),o=n(14),l=n(346),u=n(7),d=Object(i.createContext)({isLoggedIn:!1,userId:null,userName:null,token:null,isAdmin:!1,login:function(){},logout:function(){}}),j=n(31),h=n.n(j),b=n(135),O=n.n(b),p=n(348),m=function(){var e,t=Object(i.useContext)(d);return e=t.isLoggedIn?Object(c.jsx)(p.a,{variant:"outlined",onClick:t.logout,children:"Logout"}):Object(c.jsx)(O.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(e){h()({method:"POST",url:"".concat("https://cookingsousviv-backend.herokuapp.com","/auth/google"),data:{tokenId:e.tokenId}}).then((function(e){t.login(e.data.user._id,e.data.user.name,e.data.token,e.data.user.admin)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"}),Object(c.jsx)("div",{className:"auth-button-container",children:e})};var v=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsx)(m,{}),Object(c.jsxs)("h1",{children:["Cooking ",Object(c.jsx)("br",{})," Sous ",Object(c.jsx)("div",{id:"script",children:"Viv"})]}),Object(c.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/",children:"HOME"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/recipes",children:"RECIPES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/favorites",children:"FAVORITES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/about",children:"ABOUT"})}),Object(c.jsx)("li",{children:Object(c.jsx)(o.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/contact",children:"CONTACT"})}),Object(c.jsx)("div",{id:"navbar-underline"}),Object(c.jsx)("div",{id:"social-bar",children:Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"social-link",href:"https://www.instagram.com/cookingsousviv/",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("i",{className:"fab fa-instagram fa-lg"})})})})})]})]})})},x=n(11),g=n(15),f=n(140),k=function(e){var t=e.component,n=Object(f.a)(e,["component"]),a=Object(i.useContext)(d);return Object(c.jsx)(x.b,Object(g.a)(Object(g.a)({},n),{},{render:function(e){return a.isAdmin?Object(c.jsx)(t,Object(g.a)(Object(g.a)({},n),e)):Object(c.jsx)(x.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))},N=n(136),C=n(137),_=n(50),w=n(141),y=n(139),S=(n(100),function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(e){var c;return Object(N.a)(this,n),(c=t.call(this,e)).state={all_photos:[],displayed_photos:[],additional_photos:!0,num_photos_displayed:32,is_loading:!0},c.server_url="https://cookingsousviv-backend.herokuapp.com",c.getPhotos(),c.getPhotos=c.getPhotos.bind(Object(_.a)(c)),c.handleShowMore=c.handleShowMore.bind(Object(_.a)(c)),c}return Object(C.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleShowMore)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleShowMore)}},{key:"getPhotos",value:function(){var e=this;h.a.get("".concat(this.server_url,"/instaPhotos")).then((function(t){e.setState({all_photos:t.data.photos,displayed_photos:Object.values(t.data.photos).slice(0,e.state.num_photos_displayed),num_photos_displayed:e.state.num_photos_displayed+n.number_of_new_photos_to_display,is_loading:!1}),e.checkForAdditionalPhotos()})).catch((function(e){console.log(e)}))}},{key:"checkForAdditionalPhotos",value:function(){this.state.num_photos_displayed<this.state.all_photos.length?this.setState({additional_photos:!0}):this.setState({additional_photos:!1})}},{key:"handleShowMore",value:function(){window.innerHeight+document.documentElement.scrollTop+1>=document.scrollingElement.scrollHeight&&(this.setState({displayed_photos:Object.values(this.state.all_photos).slice(0,this.state.num_photos_displayed),num_photos_displayed:this.state.num_photos_displayed+n.number_of_new_photos_to_display}),this.checkForAdditionalPhotos())}},{key:"render",value:function(){return this.state.is_loading?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsx)("div",{id:"instafeed",children:this.state.displayed_photos.map((function(e,t){return Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:Object(c.jsx)("a",{href:e.permalink,children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid",src:"VIDEO"===e.media_type?e.thumbnail_url:e.media_url,alt:e.caption})})})},e.timestamp)}))})}}]),n}(a.a.Component));S.number_of_new_photos_to_display=32;var E=S;var I=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-6 welcome-message center-block",children:Object(c.jsx)("h2",{className:"text-center",children:"Welcome to my website! We're still under development, but the blog will be up and running very soon (along with a few other exciting features)!"})}),Object(c.jsx)("div",{className:"col"})]})})};var T=function(){return Object(c.jsxs)("div",{id:"homepage",children:[Object(c.jsx)(I,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-xs-12",children:Object(c.jsxs)("div",{className:"instagram-content",children:[Object(c.jsx)("h3",{children:"- recently in the kitchen -"}),Object(c.jsx)("div",{className:"row photos-wrap",children:Object(c.jsx)(E,{})})]})})})})]})};var A=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(T,{})})};var L=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col",id:"coming-soon",children:Object(c.jsx)("h2",{className:"text-center",children:"Hang in there...coming soon!"})}),Object(c.jsx)("div",{className:"col"})]})})};var P=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"ABOUT ME"}),Object(c.jsx)(L,{})]})};var D=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"CONTACT"}),Object(c.jsx)(L,{})]})};var V=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"FAVORITES"}),Object(c.jsx)(L,{})]})},R=n(18),B=n.n(R),F=n(26),W=n(66),z=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(),s=Object(u.a)(a,2),r=s[0],o=s[1],l=Object(i.useRef)([]),d=Object(i.useCallback)(function(){var e=Object(F.a)(B.a.mark((function e(t,n,i){var a,s,r,u,d=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},c(!0),s=new AbortController,l.current.push(s),"GET"!==n&&"DELETE"!==n||(a=null),e.prev=5,e.next=8,fetch(t,{method:n,headers:i,body:a,signal:s.signal});case 8:return r=e.sent,e.next=11,r.json();case 11:if(u=e.sent,l.current=l.current.filter((function(e){return e!==s})),r.ok){e.next=15;break}throw new Error(u.message);case 15:return c(!1),e.abrupt("return",u);case 19:throw e.prev=19,e.t0=e.catch(5),o(e.t0.message),c(!1),e.t0;case 24:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t,n,c){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:r,sendRequest:d,clearError:function(){o(null)}}},M=function(e){var t=Object(i.useState)([]),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(i.useState)(!0),o=Object(u.a)(r,2),l=o[0],d=o[1],j=Object(i.useState)(),b=Object(u.a)(j,2),O=b[0],p=b[1],m=e.useFormProgress(),v=Object(u.a)(m,3);v[0],v[1],v[2];return Object(i.useEffect)((function(){h.a.get("".concat("https://cookingsousviv-backend.herokuapp.com","/instaPhotos")).then((function(e){s(e.data.photos),d(!1)})).catch((function(e){console.log(e)}))})),l?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Loading..."})}):Object(c.jsxs)("div",{id:"instafeed",children:[Object(c.jsx)("h3",{children:"Select the photo you'd like to associate with this recipe:"}),a.map((function(t){return t?Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4",useFormProgress:e.useFormProgress,active:t===O,onClick:function(t){var n;(n=t).preventDefault(),p(n.target),n.target.classList.add("active"),e.setState({photo:JSON.parse(n.target.getAttribute("photo"))})},children:Object(c.jsx)("div",{className:"image-container",children:Object(c.jsx)("img",{className:"img-fluid form-img",photo:JSON.stringify(t),src:"VIDEO"===t.media_type?t.thumbnail_url:t.media_url,alt:t.caption})})},t.timestamp):null}))]})},J=n(347),q=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(J.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.title,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.intro,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.ingredients,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.directions,onChange:e.handleChange}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.state.tags,onChange:e.handleChange}),Object(c.jsx)("br",{})]})},U=function(){var e=Object(i.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1];return[n,function(){c(n+1)},function(){c(n-1)}]},G=function(){var e=Object(x.g)(),t=z().sendRequest,n=U(),a=Object(u.a)(n,3),s=a[0],r=a[1],o=a[2],l=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",photo:null}),j=Object(u.a)(l,2),h=j[0],b=j[1],O=Object(i.useContext)(d),m=function(n){n.preventDefault();var c=JSON.stringify({title:h.title,intro:h.intro,ingredients:h.ingredients,directions:h.directions,tags:h.tags,photo:h.photo});t("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/create"),"POST",{Authorization:"Bearer "+O.token,"Content-Type":"application/json"},c).then(function(){var t=Object(F.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.replace("".concat(n.url));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},v=[Object(c.jsx)(M,{state:h,setState:b,useFormProgress:U}),Object(c.jsx)(q,{state:h,handleChange:function(e){var t=e.target.value;b(Object(g.a)(Object(g.a)({},h),{},Object(W.a)({},e.target.id,t)))}})],f=0===s,k=s===v.length-1;return Object(c.jsxs)("div",{children:[Object(c.jsx)("form",{onSubmit:m,children:v[s]}),Object(c.jsx)("br",{}),Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return e.replace("/recipes")},children:" Cancel "}),!f&&Object(c.jsx)(p.a,{onClick:function(){return o()},children:"Go Back"}),Object(c.jsx)(p.a,{variant:"outlined",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),k?m(e):r()},children:k?"Create Post":"Next"})]})},H=function(e){var t=Object(x.g)(),n=z().sendRequest,a=Object(i.useContext)(d);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var i=JSON.stringify({title:c.target.title.value,intro:c.target.intro.value,ingredients:c.target.ingredients.value,directions:c.target.directions.value,tags:c.target.tags.value,id:e.location.recipe.id});n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},i).then(function(){var e=Object(F.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.replace("".concat(n.url));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsx)(J.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.title}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.intro}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.ingredients}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.directions}),Object(c.jsx)("br",{}),Object(c.jsx)(J.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.tags}),Object(c.jsx)("br",{}),Object(c.jsx)(p.a,{variant:"outlined",color:"primary",type:"submit",children:" Update "})]}),Object(c.jsx)("br",{}),Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return t.replace("/recipes")},children:" Cancel "})]})},K=function(e){var t=Object(x.g)(),n=z().sendRequest,a=Object(i.useContext)(d),s=JSON.stringify(e.location.recipe);return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault(),n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},s).then(function(){var e=Object(F.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,alert(n);case 2:t.push("/recipes");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsxs)("h2",{children:["Are you sure you want to delete ",e.location.recipe.title," "]}),Object(c.jsx)("br",{}),Object(c.jsx)(p.a,{variant:"outlined",color:"primary",type:"submit",children:" Yes "}),Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return t.push("/recipes")},children:" No "})]})})},Y=function(e){var t=Object(i.useState)(e),n=Object(u.a)(t,2),c=n[0],a=n[1];return{value:c,setValue:a,onChange:function(e){a(e.target.value)}}},Q=n(138),X=n.n(Q);var Z=function(e){var t=e.comment,n=e.recipeId,a=e.onChange,s=Object(i.useContext)(d),r=z().sendRequest,o=X()(t.createdAt).fromNow();return Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{children:Object(c.jsxs)("p",{className:"author-name",children:[" ",t.userAuthor?t.userAuthor.name:t.guestAuthor," ",Object(c.jsxs)("span",{className:"comment-date",children:[" | ",o," "]})," "]})}),t.comment,t.isCommentMine&&Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),r("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/").concat(n,"/comments/").concat(t._id),"DELETE",{Authorization:"Bearer "+s.token,"Content-Type":"application/json"}).then(function(){var e=Object(F.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)})),a()},children:"Delete"})})]},t._id)},$=function(e){return Object(c.jsx)("svg",Object(g.a)(Object(g.a)({},e),{},{"aria-label":"Activity Feed",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(c.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))},ee=function(e){return Object(c.jsx)("svg",Object(g.a)(Object(g.a)({},e),{},{"aria-label":"Unlike",fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(c.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}))};var te=function(e){var t=e.isLiked,n=e.recipeId,a=e.incLikes,s=e.decLikes,r=Object(i.useContext)(d),o=z().sendRequest,l=Object(i.useState)(t),j=Object(u.a)(l,2),h=j[0],b=j[1],O="https://cookingsousviv-backend.herokuapp.com";function p(){h?(b(!1),s(),o("".concat(O,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+r.token,"Content-Type":"application/json"})):(b(!0),a(),o("".concat(O,"/recipes/").concat(n,"/toggleLike"),"GET",{Authorization:"Bearer "+r.token,"Content-Type":"application/json"}))}return Object(i.useEffect)((function(){b(t)}),[t]),h?Object(c.jsx)(ee,{onClick:p}):h?void 0:Object(c.jsx)($,{onClick:p})};var ne=function(e){var t=Object(i.useContext)(d),n=z().sendRequest,a="https://cookingsousviv-backend.herokuapp.com",s=Y(""),r=Y(""),o=e.recipe[0].id,l=Object(i.useState)(!1),j=Object(u.a)(l,2),h=j[0],b=j[1],O=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",id:"",instaPhoto:{},comments:[],likes:[],likesCount:"",fetched:!1}),m=Object(u.a)(O,2),v=m[0],x=m[1],f=Object(i.useState)(v.likesCount),k=Object(u.a)(f,2),N=k[0],C=k[1],_=Object(i.useState)(v.comments.length),w=Object(u.a)(_,2),y=w[0],S=w[1];function E(){b(!0),S(y-1)}return Object(i.useEffect)((function(){var c=!0;v.fetched&&!h||function(e){var c={"Content-Type":"application/json"};return t.token&&(c.Authorization="Bearer "+t.token),n("".concat(e,"/recipes/").concat(o),"GET",c).then((function(e){return e})).catch((function(e){console.log(e)}))}(a).then((function(t){return t&&c&&x(Object(g.a)(Object(g.a)({},v),{},{title:e.recipe[0].title,intro:e.recipe[0].intro,ingredients:e.recipe[0].ingredients,directions:e.recipe[0].directions,tags:e.recipe[0].tags,id:e.recipe[0].id,instaPhoto:e.recipe[0].instaPhoto,comments:t.data.comments,likes:t.data.likes,likesCount:t.data.likesCount,isLiked:t.data.isLiked,fetched:!0})),function(){return c=!1}}))}),[h,v,a,e.recipe,t.token,o,n]),Object(i.useEffect)((function(){h&&setTimeout((function(){b(!1)}),500)}),[h]),Object(c.jsxs)("div",{className:"recipe-page",children:[Object(c.jsxs)("div",{className:"recipe-card",children:[Object(c.jsx)("div",{className:"recipe-card-header row",children:Object(c.jsx)("h3",{className:"recipe-card-title",children:v.title})}),Object(c.jsx)("hr",{className:"recipe-card-divider"}),Object(c.jsxs)("div",{className:"recipe-card-top row",children:[Object(c.jsx)("div",{className:"recipe-card-sub-header col-lg-4",children:Object(c.jsx)("p",{className:"recipe-card-intro",children:v.intro})}),Object(c.jsx)("div",{className:"recipe-card-image-container col-lg-8",children:Object(c.jsx)("img",{src:v.instaPhoto.media_url,alt:"food",className:"recipe-card-image"})})]}),Object(c.jsx)("hr",{className:"recipe-card-divider"}),Object(c.jsxs)("div",{className:"recipe-card-middle row",children:[Object(c.jsxs)("div",{className:"recipe-card-ingredients col-lg-4",children:[Object(c.jsx)("h4",{children:"Ingredients"}),Object(c.jsx)("p",{children:v.ingredients})]}),Object(c.jsxs)("div",{className:"recipe-card-directions col-lg-8",children:[Object(c.jsx)("h4",{children:"Preparation"}),Object(c.jsx)("p",{children:v.directions})]})]}),Object(c.jsx)("hr",{className:"recipe-card-divider"}),Object(c.jsx)("div",{className:"recipe-card-bottom row",children:Object(c.jsx)("p",{id:"recipe-card-tags",children:v.tags})})]}),Object(c.jsxs)("div",{className:"recipe-interactions",children:[Object(c.jsxs)("div",{className:"likes-container",children:[Object(c.jsx)("div",{className:"like-button-container",children:t.isLoggedIn&&Object(c.jsx)(te,{isLiked:v.isLiked,recipeId:v.id,incLikes:function(){return C(N+1)},decLikes:function(){return C(N-1)}})}),Object(c.jsx)("div",{className:"likes-count-container",children:0!==v.likesCount&&Object(c.jsxs)("span",{className:"likes bold",children:[v.likesCount," ",v.likesCount>1?"likes":"like"]})})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"comments-container col-lg-8",children:[Object(c.jsxs)("h4",{children:["Comments ",Object(c.jsx)("span",{className:"comment-count",children:v.comments.length})]}),Object(c.jsx)("ul",{children:v.comments.map((function(e,t){return Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsx)(Z,{comment:e,recipeId:v.id,onChange:E}),Object(c.jsx)("hr",{})]},t)}))})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("form",{className:"comment-form col-lg-8",children:[!t.isLoggedIn&&Object(c.jsx)("input",{name:"guestAuthor",placeholder:"Enter your name (required)",value:r.value,onChange:r.onChange,className:"comment-input"}),t.isLoggedIn&&Object(c.jsxs)("p",{className:"author-name",children:["Commenting as ",t.userName]}),Object(c.jsx)("textarea",{name:"content",rows:"5",placeholder:"Leave a comment or a tip for this recipe.",value:s.value,onChange:s.onChange,className:"comment-input"}),Object(c.jsx)("button",{id:"comment-submit",onClick:function(e){e.preventDefault();var c=t.isLoggedIn,i=t.isLoggedIn?t.userId:r.value,l=JSON.stringify({comment:s.value,registeredUser:c,userInfo:i});n("".concat(a,"/recipes/").concat(o,"/comments"),"POST",{"Content-Type":"application/json"},l).then((function(e){return console.log(e)})).catch((function(e){console.log(e)})),r.setValue(""),s.setValue(""),b(!0),S(y+1)},children:"Submit"})]})})]}),t.isAdmin&&Object(c.jsxs)("div",{children:[Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/update"),recipe:v})},children:"Update"}),Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/delete"),recipe:v})},children:"Delete"})]})]})};var ce=Object(x.h)((function(e){var t=e.history,n=e.children;return Object(i.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[t]),Object(c.jsx)(i.Fragment,{children:n})}));n(180),n(181);var ie=function(e){var t,n=e.history,a=Object(i.useState)([]),s=Object(u.a)(a,2),r=s[0],l=s[1],j=Object(i.useContext)(d),b="https://cookingsousviv-backend.herokuapp.com",O=Object(x.f)(n.location.pathname,{path:"/recipes/:id"});return O&&O.params.id&&(t=O.params.id),Object(i.useEffect)((function(){var e=!0;return function(e){return h.a.get("".concat(e,"/recipes")).then((function(e){return e.data.recipe_list})).catch((function(e){console.log(e)}))}(b).then((function(t){e&&l(t)})),function(){return e=!1}}),[b]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"RECIPES"}),Object(c.jsxs)("ul",{className:"list-group recipe-list",children:["/recipes"===n.location.pathname?r.map((function(e){var t=e.title,n=e.intro,i=e.url,a=e.instaPhoto;return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsx)("div",{className:"recipe-image-container",children:Object(c.jsx)("img",{src:a.media_url,alt:"food",className:"recipe-image"})}),Object(c.jsxs)("div",{className:"recipe-text-container",children:[Object(c.jsx)(o.b,{to:"".concat(i),className:"align-top recipe-title row",children:t}),Object(c.jsx)("p",{className:"recipe-intro row",children:n})]})]},i)})):"",Object(c.jsx)(ce,{children:Object(c.jsx)(x.d,{children:Object(c.jsx)(x.b,{exact:!0,path:"/recipes/:id",render:function(e){return Object(c.jsx)(ne,Object(g.a)({recipe:r.filter((function(e){return e.url==="/recipes/".concat(t)}))},e))}})})}),j.isAdmin&&"/recipes"===n.location.pathname&&Object(c.jsx)(p.a,{variant:"outlined",onClick:function(){return n.replace("/recipes/create")},children:"Create"})]})]})},ae=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"403 ERROR - ACCESS DENIED"}),Object(c.jsx)("p",{children:Object(c.jsx)(o.b,{to:"/",children:"Back to Home"})})]})};var se=function(){return Object(c.jsxs)(x.d,{children:[Object(c.jsx)(x.b,{exact:!0,path:"/",component:A}),Object(c.jsx)(x.b,{path:"/about",component:P}),Object(c.jsx)(x.b,{path:"/contact",component:D}),Object(c.jsx)(x.b,{path:"/favorites",component:V}),Object(c.jsx)(k,{path:"/recipes/create",component:G}),Object(c.jsx)(k,{path:"/recipes/:id/update",component:H}),Object(c.jsx)(k,{path:"/recipes/:id/delete",component:K}),Object(c.jsx)(x.b,{path:"/recipes",component:ie}),Object(c.jsx)(x.b,{path:"/unauthorized",component:ae})]})};var re=function(){return Object(c.jsx)("footer",{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-xs-12",children:Object(c.jsxs)("p",{children:[(new Date).getFullYear()," COOKING SOUS VIV | Designed by Alex Koenig"]})})})})};n(314);var oe=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(!1),r=Object(u.a)(s,2),o=r[0],l=r[1],j=Object(i.useState)(!1),h=Object(u.a)(j,2),b=h[0],O=h[1],p=Object(i.useState)(!1),m=Object(u.a)(p,2),x=m[0],g=m[1],f=Object(i.useCallback)((function(e,t,n,c,i){g(n),a(e),l(t),O(c);var s=i||new Date((new Date).getTime()+864e5);localStorage.setItem("userData",JSON.stringify({token:n,userId:e,userName:t,admin:c,expiration:s.toISOString()}))}),[]),k=Object(i.useCallback)((function(){g(null),a(null),l(null),O(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&f(e.userId,e.userName,e.token,e.admin,new Date(e.expiration))}),[f]),Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(d.Provider,{value:{isLoggedIn:!!x,token:x,userId:n,userName:o,isAdmin:b,login:f,logout:k},children:[Object(c.jsx)(v,{}),Object(c.jsx)(se,{}),Object(c.jsx)(re,{})]})})};r.a.render(Object(c.jsxs)(o.a,{children:[Object(c.jsx)(l.a,{}),Object(c.jsx)(oe,{})]}),document.getElementById("root"))}},[[315,1,2]]]);
//# sourceMappingURL=main.3c6c3acc.chunk.js.map