(this.webpackJsonpcookingsousviv=this.webpackJsonpcookingsousviv||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/heart.31316ffc.png"},179:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),a=n.n(i),r=n(8),o=n.n(r),s=n(13),l=n(24);var j=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsxs)("h1",{children:["Cooking ",Object(c.jsx)("br",{})," Sous ",Object(c.jsx)("div",{id:"script",children:"Viv"})]}),Object(c.jsxs)("ul",{className:"nav navbar-nav navbar-right",children:[Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/",children:"HOME"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/recipes",children:"RECIPES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/favorites",children:"FAVORITES"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/about",children:"ABOUT"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.c,{activeClassName:"navbar__link--active",className:"navbar__link",to:"/contact",children:"CONTACT"})}),Object(c.jsx)("div",{id:"navbar-underline"}),Object(c.jsx)("div",{id:"social-bar",children:Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"social-link",href:"https://www.instagram.com/cookingsousviv/",target:"_blank",rel:"noreferrer",children:Object(c.jsx)("i",{className:"fab fa-instagram fa-lg"})})})})})]})]})})},u=n(16),d=n(10),b=n(137),h=Object(i.createContext)({isLoggedIn:!1,userId:null,token:null,isAdmin:!1,login:function(){},logout:function(){}}),p=function(e){var t=e.component,n=Object(b.a)(e,["component"]),a=Object(i.useContext)(h);return Object(c.jsx)(d.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return a.isAdmin?Object(c.jsx)(t,Object(u.a)(Object(u.a)({},n),e)):Object(c.jsx)(d.a,{to:{pathname:"/unauthorized",state:{from:e.location}}})}}))},O=n(134),m=n(135),v=n(48),x=n(138),g=n(136),f=n(41),k=n.n(f),_=(n(171),function(e){Object(x.a)(i,e);var t=Object(g.a)(i);function i(e){var n;return Object(O.a)(this,i),(n=t.call(this,e)).state={all_photos:[],displayed_photos:[],additional_photos:!0,num_photos_displayed:32},n.server_url="https://cookingsousviv-backend.herokuapp.com",n.getPhotos(),n.getPhotos=n.getPhotos.bind(Object(v.a)(n)),n.handleShowMore=n.handleShowMore.bind(Object(v.a)(n)),n}return Object(m.a)(i,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleShowMore)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleShowMore)}},{key:"getPhotos",value:function(){var e=this;k.a.get("".concat(this.server_url,"/instaPhotos")).then((function(t){e.setState({all_photos:t.data.photos,displayed_photos:Object.values(t.data.photos).slice(0,e.state.num_photos_displayed),num_photos_displayed:e.state.num_photos_displayed+i.number_of_new_photos_to_display}),e.checkForAdditionalPhotos()})).catch((function(e){console.log(e)}))}},{key:"checkForAdditionalPhotos",value:function(){this.state.num_photos_displayed<this.state.all_photos.length?this.setState({additional_photos:!0}):this.setState({additional_photos:!1})}},{key:"handleShowMore",value:function(){window.innerHeight+document.documentElement.scrollTop+1>=document.scrollingElement.scrollHeight&&(this.setState({displayed_photos:Object.values(this.state.all_photos).slice(0,this.state.num_photos_displayed),num_photos_displayed:this.state.num_photos_displayed+i.number_of_new_photos_to_display}),this.checkForAdditionalPhotos())}},{key:"render",value:function(){return Object(c.jsx)("div",{id:"instafeed",children:this.state.displayed_photos.map((function(e,t){return Object(c.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3",children:Object(c.jsx)("a",{href:e.permalink,children:Object(c.jsxs)("div",{className:"photo-box",children:[Object(c.jsx)("div",{className:"image-wrap",children:Object(c.jsx)("img",{src:"VIDEO"===e.media_type?e.thumbnail_url:e.media_url,alt:e.caption})}),Object(c.jsx)("div",{className:"likes",children:Object(c.jsx)("img",{src:n(177).default,alt:"heart"})})]})})},e.timestamp)}))})}}]),i}(a.a.Component));_.number_of_new_photos_to_display=32;var w=_;var y=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col",id:"welcome-message",children:Object(c.jsx)("h2",{className:"text-center",children:"Welcome to my website! We're still under development, but the blog will be up and running very soon (along with a few other exciting features)!"})}),Object(c.jsx)("div",{className:"col"})]})})};var N=function(){return Object(c.jsxs)("div",{id:"homepage",children:[Object(c.jsx)(y,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-xs-12",children:Object(c.jsxs)("div",{className:"instagram-content",children:[Object(c.jsx)("h3",{children:"- recently in the kitchen -"}),Object(c.jsx)("div",{className:"row photos-wrap",children:Object(c.jsx)(w,{})})]})})})})]})};var S=function(){return Object(c.jsx)("div",{children:Object(c.jsx)(N,{})})},C=n(63),I=n.n(C);var E=function(e){return console.log(e),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"LOGIN"}),Object(c.jsx)(I.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Log in with Google",onSuccess:e.handleLogin,onFailure:e.handleLogin,cookiePolicy:"single_host_origin"})]})},T=n(345);var L=function(e){return console.log(e),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"LOGOUT"}),Object(c.jsxs)("form",{onSubmit:e.handleLogout,children:[Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",color:"primary",type:"submit",children:" Logout "})]})]})};var P=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row justify-content-center",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col",id:"coming-soon",children:Object(c.jsx)("h2",{className:"text-center",children:"Hang in there...coming soon!"})}),Object(c.jsx)("div",{className:"col"})]})})};var A=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"ABOUT ME"}),Object(c.jsx)(P,{})]})};var D=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"CONTACT"}),Object(c.jsx)(P,{})]})};var W=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"FAVORITES"}),Object(c.jsx)(P,{})]})},R=n(21),V=n.n(R),M=n(30),B=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(),r=Object(l.a)(a,2),o=r[0],s=r[1],j=Object(i.useRef)([]),u=Object(i.useCallback)(function(){var e=Object(M.a)(V.a.mark((function e(t,n,i){var a,r,o,l,u=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]?u[3]:{},c(!0),r=new AbortController,j.current.push(r),e.prev=4,e.next=7,fetch(t,{method:n,headers:i,body:a,signal:r.signal});case 7:return o=e.sent,e.next=10,o.json();case 10:if(l=e.sent,j.current=j.current.filter((function(e){return e!==r})),o.ok){e.next=14;break}throw new Error(l.message);case 14:return c(!1),e.abrupt("return",l);case 18:throw e.prev=18,e.t0=e.catch(4),s(e.t0.message),c(!1),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t,n,c){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){j.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:o,sendRequest:u,clearError:function(){s(null)}}},F=n(344),J=function(){var e=Object(d.g)(),t=B().sendRequest,n=Object(i.useContext)(h);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var i=JSON.stringify({title:c.target.title.value,intro:c.target.intro.value,ingredients:c.target.ingredients.value,directions:c.target.directions.value,tags:c.target.tags.value});t("".concat("https://cookingsousviv-backend.herokuapp.com","/recipes/create"),"POST",{Authorization:"Bearer "+n.token,"Content-Type":"application/json"},i).then(function(){var t=Object(M.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.replace("".concat(n.url));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsx)(F.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",color:"primary",type:"submit",children:" Create Post "})]}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return e.replace("/recipes")},children:" Cancel "})]})},q=function(e){var t=Object(d.g)(),n=B().sendRequest,a=Object(i.useContext)(h);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault();var i=JSON.stringify({title:c.target.title.value,intro:c.target.intro.value,ingredients:c.target.ingredients.value,directions:c.target.directions.value,tags:c.target.tags.value,id:e.location.recipe.id});n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},i).then(function(){var e=Object(M.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.replace("".concat(n.url));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsx)(F.a,{id:"title",label:"Title",margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.title}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"intro",label:"Intro",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.intro}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"ingredients",label:"Ingredients",multiline:!0,rows:20,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.ingredients}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"directions",label:"Directions",multiline:!0,rows:40,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.directions}),Object(c.jsx)("br",{}),Object(c.jsx)(F.a,{id:"tags",label:"Tags",multiline:!0,rows:6,margin:"normal",variant:"outlined",fullWidth:!0,defaultValue:e.location.recipe.tags}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",color:"primary",type:"submit",children:" Update "})]}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return t.replace("/recipes")},children:" Cancel "})]})},U=function(e){var t=Object(d.g)(),n=B().sendRequest,a=Object(i.useContext)(h),r=JSON.stringify(e.location.recipe);return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault(),n("".concat("https://cookingsousviv-backend.herokuapp.com").concat(e.location.pathname),"POST",{Authorization:"Bearer "+a.token,"Content-Type":"application/json"},r).then(function(){var e=Object(M.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,alert(n);case 2:t.push("/recipes");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},children:[Object(c.jsxs)("h2",{children:["Are you sure you want to delete ",e.location.recipe.title," "]}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{variant:"outlined",color:"primary",type:"submit",children:" Yes "}),Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return t.push("/recipes")},children:" No "})]})})};var z=function(e){var t=Object(i.useContext)(h),n=Object(i.useState)({title:"",intro:"",ingredients:"",directions:"",tags:"",id:"",instaPhoto:{},fetched:!1}),a=Object(l.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){e.recipe[0]&&!r.fetched&&o(Object(u.a)(Object(u.a)({},r),{},{title:e.recipe[0].title,intro:e.recipe[0].intro,ingredients:e.recipe[0].ingredients,directions:e.recipe[0].directions,tags:e.recipe[0].tags,id:e.recipe[0].id,instaPhoto:e.recipe[0].instaPhoto,fetched:!0}))}),[r,e]),Object(c.jsxs)("div",{className:"recipe-container",children:[Object(c.jsx)("h3",{children:r.title}),Object(c.jsx)("p",{children:r.intro}),Object(c.jsx)("p",{children:r.ingredients}),Object(c.jsx)("p",{children:r.directions}),Object(c.jsx)("p",{children:r.tags}),t.isAdmin&&Object(c.jsxs)("div",{children:[Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/update"),recipe:r})},children:"Update"}),Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return e.history.push({pathname:"".concat(e.history.location.pathname,"/delete"),recipe:r})},children:"Delete"})]})]})};n(179),n(180);var H=function(e){var t,n=e.history,a=Object(i.useState)([]),r=Object(l.a)(a,2),o=r[0],j=r[1],b=Object(i.useContext)(h),p="https://cookingsousviv-backend.herokuapp.com",O=Object(d.f)(n.location.pathname,{path:"/recipes/:id"});return O&&O.params.id&&(t=O.params.id),Object(i.useEffect)((function(){var e=!0;return function(e){return k.a.get("".concat(e,"/recipes")).then((function(e){return e.data.recipe_list})).catch((function(e){console.log(e)}))}(p).then((function(t){e&&j(t)})),function(){return e=!1}}),[p]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"RECIPES"}),Object(c.jsxs)("ul",{className:"list-group recipe-list",children:["/recipes"===n.location.pathname?o.map((function(e){var t=e.title,n=e.intro,i=e.url;return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsxs)("div",{className:"recipe-image-container",children:[Object(c.jsx)("div",{className:"recipe-image-dummy"}),Object(c.jsx)("div",{className:"recipe-image"})]}),Object(c.jsxs)("div",{className:"recipe-text-container",children:[Object(c.jsx)(s.b,{to:"".concat(i),className:"align-top recipe-title row",children:t}),Object(c.jsx)("p",{className:"recipe-intro row",children:n})]})]},i)})):"",Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{exact:!0,path:"/recipes/:id",render:function(e){return Object(c.jsx)(z,Object(u.a)({recipe:o.filter((function(e){return e.url==="/recipes/".concat(t)}))},e))}})}),b.isAdmin&&"/recipes"===n.location.pathname&&Object(c.jsx)(T.a,{variant:"outlined",onClick:function(){return n.replace("/recipes/create")},children:"Create"})]})]})},G=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"403 ERROR - ACCESS DENIED"}),Object(c.jsx)("p",{children:Object(c.jsx)(s.b,{to:"/",children:"Back to Home"})})]})};var Y=function(e){return Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:S}),Object(c.jsx)(d.b,{path:"/login",render:function(e){return Object(c.jsx)(E,Object(u.a)(Object(u.a)({},e),{},{handleLogin:e.handleLogin}))}}),Object(c.jsx)(d.b,{path:"/logout",handleLogout:e.handleLogout,render:function(e){return Object(c.jsx)(L,Object(u.a)(Object(u.a)({},e),{},{handleLogout:e.handleLogout}))}}),Object(c.jsx)(d.b,{path:"/about",component:A}),Object(c.jsx)(d.b,{path:"/contact",component:D}),Object(c.jsx)(d.b,{path:"/favorites",component:W}),Object(c.jsx)(p,{path:"/recipes/create",component:J}),Object(c.jsx)(p,{path:"/recipes/:id/update",component:q}),Object(c.jsx)(p,{path:"/recipes/:id/delete",component:U}),Object(c.jsx)(d.b,{path:"/recipes",component:H}),Object(c.jsx)(d.b,{path:"/unauthorized",component:G})]})},K=function(){var e,t=Object(i.useContext)(h);return e=t.isLoggedIn?Object(c.jsx)(T.a,{variant:"outlined",onClick:t.logout,children:"Logout"}):Object(c.jsx)(I.a,{clientId:"290529081181-dgvg8g4jsv89lqrnl1kgai989koppnb2.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(e){k()({method:"POST",url:"".concat("https://cookingsousviv-backend.herokuapp.com","/auth/google"),data:{tokenId:e.tokenId}}).then((function(e){t.login(e.data.user._id,e.data.token,e.data.user.admin)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"}),Object(c.jsx)("div",{children:e})};n(313);var Q=function(){var e=Object(i.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),o=Object(l.a)(r,2),s=o[0],u=o[1],d=Object(i.useState)(!1),b=Object(l.a)(d,2),p=b[0],O=b[1],m=Object(i.useCallback)((function(e,t,n,c){O(t),a(e),u(n);var i=c||new Date((new Date).getTime()+864e5);localStorage.setItem("userData",JSON.stringify({token:t,userId:e,admin:n,expiration:i.toISOString()}))}),[]),v=Object(i.useCallback)((function(){O(null),a(null),u(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,e.admin,new Date(e.expiration))}),[m]),Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(h.Provider,{value:{isLoggedIn:!!p,token:p,userId:n,isAdmin:s,login:m,logout:v},children:[Object(c.jsx)(j,{}),Object(c.jsx)(K,{}),Object(c.jsx)(Y,{})]})})};o.a.render(Object(c.jsx)(s.a,{children:Object(c.jsx)(Q,{})}),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.00b3affa.chunk.js.map